<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>/Users/lsmith/dev/yui3-gallery/src/gallery-torelativetime/js/torelativetime.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.4.0/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <script src="http://yui.yahooapis.com/combo?3.4.0/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1><a href="../index.html"><img src="../assets/css/logo.png">undefined: /Users/lsmith/dev/yui3-gallery/src/gallery-torelativetime/js/torelativetime.js</a></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/DataSchema.html">DataSchema</a></li>
            
                <li><a href="../classes/DataTable.html">DataTable</a></li>
            
                <li><a href="../classes/DataTable.Base.html">DataTable.Base</a></li>
            
                <li><a href="../classes/DataTable.BodyView.html">DataTable.BodyView</a></li>
            
                <li><a href="../classes/DataTable.ColumnWidths.html">DataTable.ColumnWidths</a></li>
            
                <li><a href="../classes/DataTable.Core.html">DataTable.Core</a></li>
            
                <li><a href="../classes/DataTable.HeaderView.html">DataTable.HeaderView</a></li>
            
                <li><a href="../classes/DataTable.Mutable.html">DataTable.Mutable</a></li>
            
                <li><a href="../classes/DataTable.Scrollable.html">DataTable.Scrollable</a></li>
            
                <li><a href="../classes/DataTable.Sortable.html">DataTable.Sortable</a></li>
            
                <li><a href="../classes/JSONPRequest.html">JSONPRequest</a></li>
            
                <li><a href="../classes/Plugin.html">Plugin</a></li>
            
                <li><a href="../classes/YUI~event-drag.html">YUI~event-drag</a></li>
            
                <li><a href="../classes/YUI~event-konami.html">YUI~event-konami</a></li>
            
                <li><a href="../classes/YUI~toRelativeTime.html">YUI~toRelativeTime</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/@datatable-scroll.html">@datatable-scroll</a></li>
            
                <li><a href="../modules/dataschema.html">dataschema</a></li>
            
                <li><a href="../modules/dataschema-class.html">dataschema-class</a></li>
            
                <li><a href="../modules/datatable-base.html">datatable-base</a></li>
            
                <li><a href="../modules/datatable-body.html">datatable-body</a></li>
            
                <li><a href="../modules/datatable-column-widths.html">datatable-column-widths</a></li>
            
                <li><a href="../modules/datatable-core.html">datatable-core</a></li>
            
                <li><a href="../modules/datatable-head.html">datatable-head</a></li>
            
                <li><a href="../modules/datatable-mutable.html">datatable-mutable</a></li>
            
                <li><a href="../modules/datatable-sort.html">datatable-sort</a></li>
            
                <li><a href="../modules/event-drag.html">event-drag</a></li>
            
                <li><a href="../modules/event-konami.html">event-konami</a></li>
            
                <li><a href="../modules/gallery-jsonp.html">gallery-jsonp</a></li>
            
                <li><a href="../modules/gallery-pluginattr.html">gallery-pluginattr</a></li>
            
                <li><a href="../modules/gallery-torelativetime.html">gallery-torelativetime</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
    </div>


            <div class="apidocs">
                <div id="docs-main" class="content">
                    <h1 class="file-heading">File: /Users/lsmith/dev/yui3-gallery/src/gallery-torelativetime/js/torelativetime.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * Provides a method Y.toRelativeTime(Date, refDate) to translate a Date
 * instance to a string like "2 days ago".  If the second parameter is
 * provided, the time delta is in reference to this date.
 *
 * @module gallery-torelativetime
 *
 * @class YUI~toRelativeTime
 */

/**
 * @method toRelativeTime
 * @param d {Date} the Date to translate.
 * @param from {Date} (optional) reference Date. Default is now.
 * @return {String} the delta between from and d, in human readable form
 */
function toRelativeTime(d,from) {
    d    = d || new Date();
    from = from || new Date();

    var delta   = (from.getTime() - d.getTime()) / 1000,
        strings = toRelativeTime.strings,
        time    = "",
        rel, tmp, months, years;

    if (arguments.length &lt; 2) {
        rel = (delta &lt; 0) ? strings.fromnow : strings.ago;
    } else {
        rel = (delta &lt; 0) ? strings.ahead : strings.before;
    }

    if (delta &lt; 0) {
        tmp = d;
        d   = from;
        from = tmp;
        delta *= -1;
    }

    time = delta &lt; 5      ? strings.now     :
           delta &lt; 60     ? strings.seconds :
           delta &lt; 120    ? strings.minute  :
           delta &lt; 3600   ? strings.minutes.replace(/X/, Math.floor(delta/60)) :
           delta &lt; 7200   ? strings.hour    :
           delta &lt; 86400  ? strings.hours.replace(/X/, Math.floor(delta/3600)) :
           delta &lt; 172800 ? strings.day     : '';

    if (!time) {
        d.setHours(0,0,0);
        from.setHours(0,0,0);
        delta = Math.round((from.getTime() - d.getTime()) / 86400000);

        if (delta &gt; 27) {
            years  = from.getFullYear() - d.getFullYear();
            months = from.getMonth() - d.getMonth();

            if (months &lt; 0) {
                months += 12;
                years--;
            }

            if (months) {
                time = (months &gt; 1) ?
                    strings.months.replace(/X/, months) :
                    strings.month;

            }

            if (years) {
                if (months) {
                    time = strings.and + time;
                }

                time = (years &gt; 1 ?
                    strings.years.replace(/X/, years) :
                    strings.year) + time;
            }
        }

        if (!time) {
            if (d.getDay() === from.getDay()) {
                tmp = Math.round(delta / 7);

                time = (tmp &gt; 1) ?
                    strings.weeks.replace(/X/, tmp) :
                    strings.week;
            } else {
                time = strings.days.replace(/X/, delta);
            }
        }
    }

    if (time !== strings.now) {
        time += rel;
    }
    return time;
}

/**
 * The strings to use for relative times.  Represent Numbers (minutes, hours,
 * days) as X (e.g. "about X hours ago"). Keys are now, seconds, minute,
 * minutes, hour, hours, day, and days.
 *
 * @property toRelativeTime.strings
 * @type {Object}
 */
toRelativeTime.strings = {
    now     : "right now",
    seconds : "less than a minute",
    minute  : "about a minute",
    minutes : "X minutes",
    hour    : "about an hour",
    hours   : "about X hours",
    day     : "1 day" ,
    days    : "X days",
    week    : "about a week",
    weeks   : "X weeks",
    month   : "about a month",
    months  : "X months",
    year    : "about a year",
    years   : "X years",
    ahead   : " ahead",
    before  : " before",
    ago     : " ago",
    fromnow : " from now",
    and     : " and "
};

Y.toRelativeTime = toRelativeTime;

    </pre>
</div>

                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<!--script src="../assets/js/tabs.js"></script-->
<script src="../assets/../api.js"></script>


<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
